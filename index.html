<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Murino FM ‚Äî Radio</title>

<style>
body {
    margin: 0;
    background: #0f0f0f;
    color: white;
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
}

h1 {
    margin: 40px 0 5px;
    font-weight: 500;
}

#currentTrack {
    opacity: 0.7;
    margin-bottom: 15px;
}

.controls {
    margin: 10px 0 20px;
}

button {
    background: #1a1a1a;
    border: none;
    color: white;
    padding: 12px 20px;
    margin: 0 6px;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.2s;
    font-size: 16px;
}

button:hover {
    background: #ff5500;
}

#playlist {
    width: 90%;
    max-width: 500px;
    margin-top: 10px;
}

.track {
    padding: 12px;
    margin: 6px 0;
    background: #1a1a1a;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.2s;
}

.track.active {
    background: #ff5500;
}

iframe {
    display: none; /* —Å–∫—Ä—ã–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä */
}
</style>
</head>
<body>

<h1>üéß Murino FM</h1>
<div id="currentTrack">–ó–∞–≥—Ä—É–∑–∫–∞...</div>

<div class="controls">
    <button id="prev">‚èÆ</button>
    <button id="play">‚ñ∂Ô∏è</button>
    <button id="next">‚è≠</button>
</div>

<iframe 
    id="sc-player"
    width="0"
    height="0"
    allow="autoplay"
    src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/ivan-bastrikov-sergeevich/sets/murino-fm&auto_play=false&show_artwork=false&visual=false&show_comments=false&show_user=false&show_reposts=false">
</iframe>

<div id="playlist"></div>

<script src="https://w.soundcloud.com/player/api.js"></script>
<script>
const widget = SC.Widget(document.getElementById('sc-player'));
const playlistDiv = document.getElementById("playlist");
const currentTrackDiv = document.getElementById("currentTrack");

let tracks = [];
let currentIndex = 0;
let isPlaying = false;

widget.bind(SC.Widget.Events.READY, function() {
    widget.getSounds(function(sounds) {
        tracks = sounds;

        sounds.forEach((track, index) => {
            const div = document.createElement("div");
            div.classList.add("track");
            div.textContent = track.title;

            div.addEventListener("click", () => {
                widget.skip(index);
                widget.play();
            });

            playlistDiv.appendChild(div);
        });
    });
});

widget.bind(SC.Widget.Events.PLAY, function() {
    isPlaying = true;
    document.getElementById("play").textContent = "‚è∏";
    widget.getCurrentSound(function(sound) {
        currentIndex = tracks.findIndex(t => t.id === sound.id);
        updateUI(sound.title);
    });
});

widget.bind(SC.Widget.Events.PAUSE, function() {
    isPlaying = false;
    document.getElementById("play").textContent = "‚ñ∂Ô∏è";
});

widget.bind(SC.Widget.Events.FINISH, function() {
    widget.next(); // –∞–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥
});

function updateUI(title) {
    currentTrackDiv.textContent = title;

    document.querySelectorAll('.track').forEach(t => t.classList.remove('active'));
    if (playlistDiv.children[currentIndex]) {
        playlistDiv.children[currentIndex].classList.add('active');
    }
}

document.getElementById("play").addEventListener("click", () => {
    if (isPlaying) widget.pause();
    else widget.play();
});

document.getElementById("next").addEventListener("click", () => widget.next());
document.getElementById("prev").addEventListener("click", () => widget.prev());
</script>

</body>
</html>